# üß™ Testing Mode Instructions

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –¢–ï–°–¢–û–í–´–ô –†–ï–ñ–ò–ú

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å **—Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏** –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ BLE —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

---

## –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ?

### 1. –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª: `lib/services/test_data_generator.dart`
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–º–∏—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç Arduino:
- **–£–≥–ª—ã**: –ø–ª–∞–≤–Ω–æ –º–µ–Ω—è—é—Ç—Å—è –æ—Ç 0¬∞ –¥–æ 180¬∞ —Å –Ω–µ–±–æ–ª—å—à–∏–º —à—É–º–æ–º
- **EMG**: –∏–º–∏—Ç–∏—Ä—É–µ—Ç –º—ã—à–µ—á–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–º–∏ —Å–∏–≥–Ω–∞–ª–∞–º–∏ –∏ –≤—Å–ø–ª–µ—Å–∫–∞–º–∏

### 2. –ò–∑–º–µ–Ω—ë–Ω —Ñ–∞–π–ª: `lib/blocs/ble/ble_bloc.dart`
- ‚úÖ –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏–º–ø–æ—Ä—Ç `BleService`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `TestDataGenerator`
- ‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã `_bleService` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `_testDataGenerator`
- ‚úÖ –ò–º–∏—Ç–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (1 —Å–µ–∫—É–Ω–¥–∞ –∑–∞–¥–µ—Ä–∂–∫–∏)

---

## üîÑ –ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –†–ï–ê–õ–¨–ù–´–ô BLE?

### –í —Ñ–∞–π–ª–µ `lib/blocs/ble/ble_bloc.dart`:

#### 1. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–º–ø–æ—Ä—Ç BleService (—Å—Ç—Ä–æ–∫–∞ ~6):
```dart
import '../../services/ble_service.dart'; // –£–±—Ä–∞—Ç—å // –≤ –Ω–∞—á–∞–ª–µ
```

#### 2. –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–º–ø–æ—Ä—Ç TestDataGenerator (—Å—Ç—Ä–æ–∫–∞ ~7):
```dart
// import '../../services/test_data_generator.dart';
```

#### 3. –ó–∞–º–µ–Ω–∏—Ç–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (—Å—Ç—Ä–æ–∫–∞ ~13):
```dart
late BleService _bleService; // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
// late TestDataGenerator _testDataGenerator; // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
```

#### 4. –í –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ BleBloc (—Å—Ç—Ä–æ–∫–∞ ~25):
–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ —Å `_bleService`:
```dart
_bleService = BleService(
  targetDeviceName: "MyESP32",
  onNewData: ({required angleValues, required emgValues}) {
    add(BleNewDataReceived(
      angleValues: angleValues,
      emgValues: emgValues,
    ));
  },
  onConnected: () => add(BleConnected()),
);
```

–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ —Å `_testDataGenerator`:
```dart
// _testDataGenerator = TestDataGenerator(
//   onNewData: ({required angleValues, required emgValues}) {
//     add(BleNewDataReceived(
//       angleValues: angleValues,
//       emgValues: emgValues,
//     ));
//   },
// );
```

#### 5. –í –º–µ—Ç–æ–¥–µ `_onStartScan` (—Å—Ç—Ä–æ–∫–∞ ~54):
```dart
emit(state.copyWith(status: BleConnectionStatus.scanning));
_bleService.startScan(); // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

// –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:
// await Future.delayed(const Duration(seconds: 1));
// add(BleConnected());
// _testDataGenerator.start();
```

#### 6. –í –º–µ—Ç–æ–¥–µ `on<BleConnected>` (—Å—Ç—Ä–æ–∫–∞ ~39):
```dart
_bleService.stopScan(); // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
```

#### 7. –í –º–µ—Ç–æ–¥–µ `on<BleStopScan>` (—Å—Ç—Ä–æ–∫–∞ ~43):
```dart
_bleService.stopScan(); // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
// _testDataGenerator.stop(); // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
```

#### 8. –í –º–µ—Ç–æ–¥–µ `_onRestartScan` (—Å—Ç—Ä–æ–∫–∞ ~59):
```dart
_bleService.stopScan(); // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
// _testDataGenerator.stop(); // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

emit(...);

_bleService.startScan(); // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

// –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å:
// await Future.delayed(const Duration(seconds: 1));
// add(BleConnected());
// _testDataGenerator.start();
```

#### 9. –í –º–µ—Ç–æ–¥–µ `close()` (—Å—Ç—Ä–æ–∫–∞ ~316):
```dart
_bleService.dispose(); // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
// _testDataGenerator.dispose(); // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
```

---

## üìä –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä?

- **–ß–∞—Å—Ç–æ—Ç–∞**: –¥–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 200ms (–∫–∞–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º BLE)
- **–£–≥–ª—ã**: 
  - 2 –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –ø–∞–∫–µ—Ç
  - –ü–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç 0¬∞ –¥–æ 180¬∞
  - –ù–µ–±–æ–ª—å—à–æ–π —Å–ª—É—á–∞–π–Ω—ã–π —à—É–º (¬±2.5¬∞)
  
- **EMG**:
  - 5 –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –ø–∞–∫–µ—Ç
  - –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å: ~1000
  - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π —Å–∏–≥–Ω–∞–ª (—Ü–∏–∫–ª 3 —Å–µ–∫): ¬±5000
  - –°–ª—É—á–∞–π–Ω—ã–π —à—É–º: 0-10000
  - –í—Å–ø–ª–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (10% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å): –¥–æ +30000
  - –î–∏–∞–ø–∞–∑–æ–Ω: 100-50000

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

‚úÖ –ù–µ –Ω—É–∂–µ–Ω —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –¥–∞—Ç—á–∏–∫ EMG
‚úÖ –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å UI –∏ –≥—Ä–∞—Ñ–∏–∫–∏
‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
‚úÖ –ò–º–∏—Ç–∞—Ü–∏—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ EMG

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ EMG –¥–∞—Ç—á–∏–∫–∞:
1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π BLE (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Arduino –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
   ```
   Angle: 40.1 40.2 EMG: 1000 1242 4523 41343 12321
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≥—Ä–∞—Ñ–∏–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è EMG
